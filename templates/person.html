{% extends "base.html" %}

{% block title %}Nutbush Attendee {{ person_name }} {% endblock %}

{% block display_title %} Attendee {% endblock %}
{% block display_title_sub %}
    {{ person_name }}
{% endblock %}


{% block main_content %}
    <div class="row">
    <div class="col-md-12">

    {% if person %}
        <h3><span class="label label-primary">
            Movie Nights <span class="badge" style="font-size:1.8rem;">{{person.nights|length}}</span>
        </label></h3>
        <table class="table table-hover datatable SortableTable" id="personnights" name="personnights">
        <thead>
            <tr><th>Date</th><th>Movie</th><th>Meal</th></tr>
        </thead>
        <tbody>
        {% for mn in person.nights %}
            <tr>
                <td class="nw"><a href="{{url_for('main.night_display', datestr=mn.datestr)}}">{{mn.listdate_short}}</a></td>
                <td><a href="{{url_for('main.movie_display', moviekey=mn.imdbid)}}">{{mn.moviename}}</a></td>
                <td>{{mn.dinner}}</td>
            </tr>
        {% endfor %}
        </tbody>
        </table>

        {% if person.img%}
            <br/><br/>
            <hr/>
            <div class="personimg">
                <img src="{{person.img}}" alt="A photographic exposition of this attendee's soul" />
            </div>
        {% endif %}

    {% else %}
        <ul>
        {% for per in persons %}
            <li><a href="{{url_for('main.person_display', name=per.urlname)}}">{{per.name}}</a></li>
        {% endfor %}
        </ul>
    {% endif %}

    </div>
    </div>
{% endblock %}


{% block extra_js %}
<script type="text/javascript">
$('#personnights').dataTable({
    "bPaginate": false,
    "aaSorting": [[ 0, "desc" ]],
    "aoColumns": [
        { "sType": "date" },
        null,
        null
    ],
    responsive: true
});
</script>
{% endblock %}
